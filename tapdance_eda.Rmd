---
title: "tapdance_eda"
author: "Natalie Ghidali"
date: "4/15/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# loading packages and set seed
```{r}
library(tidyverse)
library(tidymodels)
library(skimr)
library(janitor)

set.seed(42)
```

# Initial overview of data

### Load and clean dataset
```{r}
tap_data <- read_csv("data/tap_dat.csv") %>% 
  clean_names() %>%
  mutate(
    level = factor(level),
    tap_level_of_study = factor(tap_level_of_study),
    sector_type = factor(sector_type),
    tap_sector_group = factor(tap_sector_group),
    recipient_age_group = ordered(recipient_age_group, 
                                  levels = c("under age 22",  "age 22 - 25", "age 26 - 35",  "age 36 - 50",  "over age 50")),
    tap_financial_status = factor(tap_financial_status),
    tap_award_schedule = factor(tap_award_schedule),
    tap_degree_or_non_degree = factor(tap_degree_or_non_degree),
    tap_schedule_letter = factor(tap_schedule_letter),
    income = as.numeric(sub(",","",str_extract(income_by_1_000_range, "\\d+,*\\d*")))
  ) %>%
  select(-income_by_1_000_range, -income_by_5_000_range, -income_by_10_000_range)

# skim full dataset
skim(tap_data)
```

### Skim outcome variable
```{r}
skim(tap_data$sector_type)
```

# Thorough univariate investigation of response and predictor variables

### Academic Year
```{r}
ggplot(tap_data, aes(academic_year)) +
  geom_histogram(bins = 20)
```
Academic year is right skewed, there do not appear to be significant outliers.

### Level
```{r}
ggplot(tap_data, aes(level)) +
  geom_bar()
```
We can see there is a severe class imbalance for the level variable with far more undergraduate students than graduate students.

### TAP Level of Study
```{r}
ggplot(tap_data, aes(tap_level_of_study)) +
  geom_bar()
```
We can see there is a severe class imbalance with far more students in the lower levels of the education system, which makes sense.

### Sector Type
```{r}
ggplot(tap_data, aes(sector_type)) +
  geom_bar()
```
Sector type is fairly balanced, with a similar number of private and public institutions.

### TAP Sector Group
```{r}
ggplot(tap_data, aes(tap_sector_group)) +
  geom_bar() +
  coord_flip()
```
Tap sector group is imbalanced.

### Recipient Age Group
```{r}
ggplot(tap_data, aes(recipient_age_group)) +
  geom_bar()
```
Recipient age group has a fairly normal distribution, with perhapse a slight right skew.

### TAP Financial Status
```{r}
ggplot(tap_data, aes(tap_financial_status)) +
  geom_bar()
```
TAP financial status is imbalanced, with more financially independent cases than financially dependent.

### TAP Award Schedule
```{r}
ggplot(tap_data, aes(tap_award_schedule)) +
  geom_bar()
```
TAP award schedule is imbalanced, there are far more dependently scheduled the independently scheduled or married with no dependents.

### TAP Degree or NonDegree
```{r}
ggplot(tap_data, aes(tap_degree_or_non_degree)) +
  geom_bar()
```
Tap degre or non degree is very imbalanced, with far more counts of degree then non degree.

### TAP Schedule Letter
```{r}
ggplot(tap_data, aes(tap_schedule_letter)) +
  geom_bar()
```
TAP schedule letter is very imbalanced. There are many Es in comparison to a relatively low count for other classes.

### Income
```{r}
ggplot(tap_data, aes(income)) +
  geom_histogram(bins = 20)
```
There are many more students at the lower end of the income spectrum vs at the higher end. Incomes do not exceed $80,000.

### TAP Recipient Headcount
```{r}
ggplot(tap_data, aes(tap_recipient_headcount)) +
  geom_histogram(bins = 50) +
  xlim(c(0,50))
```
The TAP recipient headcount is heavily right skewed with a very long tail.


### TAP Recipient FTEs
```{r}
ggplot(tap_data, aes(tap_recipient_ft_es)) +
  geom_histogram() +
  xlim(0,50)
```
The TAP recipient ftes is heavily right skewed with a very long tail.

### TAP Recipient Dollars
```{r}
ggplot(tap_data, aes(tap_recipient_dollars)) +
  geom_histogram() +
  xlim(0,200000)
```
The TAP recipient dollars is heavily right skewed with a very long tail.

# Interesting/important relationships between and among response variable(s) and predictor variables
```{r}

```

# General variable exploration
```{r}

```

